package com.server.starter.exploiter.mapper;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;
import org.apache.ibatis.annotations.Select;

/**
 * template mapper
 *
 * @author wq li
 */
@Mapper
public interface TemplateMapper {

    @Select("<script>" +
            "SELECT COUNT(id) FROM templates " +
            "WHERE name = #{name} AND suffix = #{suffix} AND version = #{version} " +
            "<if test='id != null'>AND id != #{id}</if>" +
            "</script>")
    long countByNameAndSuffixAndVersionAndIdNot(@Param("name") String name, @Param("suffix") String suffix,
                                                @Param("version") String version, @Param("id") Long id);

}
