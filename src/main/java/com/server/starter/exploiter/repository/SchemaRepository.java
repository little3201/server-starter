package com.server.starter.exploiter.repository;

import com.server.starter.exploiter.domain.Schema;
import org.springframework.data.jdbc.repository.query.Modifying;
import org.springframework.data.jdbc.repository.query.Query;
import org.springframework.data.repository.CrudRepository;
import org.springframework.data.repository.PagingAndSortingRepository;
import org.springframework.stereotype.Repository;


/**
 * schema repository.
 *
 * @author wq li
 **/
@Repository
public interface SchemaRepository extends CrudRepository<Schema, Long>,
        PagingAndSortingRepository<Schema, Long> {

    /**
     * 是否存在
     *
     * @param name 名称
     * @return true-存在，false-否
     */
    boolean existsByNameAndIdNot(String name, Long id);

    @Modifying
    @Query("UPDATE schemas SET enabled = NOT enabled WHERE id = :id")
    boolean updateEnabledById(Long id);
}
